import{H as E,r as b,_ as A,a as p,o as v,c as y,b as e,e as R,f as $,d as l,w as m,I as u,h as w,J as S,t as x,l as U,L as j,p as T,g as B}from"./app.18474491.js";import{F as q,a as V,E as M,A as I,c as F,b as f,u as N,d as z,e as P}from"./AppLoader.f92e7638.js";import{C as W}from"./vue-select.68fc8363.js";const K={name:"AppLoginForm",components:{Field:q,Form:V,ErrorMessage:M,AppLoader:I},emits:["close","switchReg","forget"],setup(){const a=E(),s=b(!1),r=F({email:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(8,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432")});return{login:_=>{s.value=!0,a.dispatch("auth/login",_),s.value=!1},validationSchema:r,loading:s}}},O={class:"modal"},D={class:"modal-container"},H=e("h2",null,"\u0412\u0445\u043E\u0434",-1),J={class:"form-control"},G={class:"form-control"},Q=e("button",{class:"btn btn-default btn-home"},"\u0412\u043E\u0439\u0442\u0438",-1),X={class:"form-info jcc"},Y={class:"form-info jcc"};function Z(a,s,r,o,_,h){const c=p("AppLoader"),i=p("Field"),d=p("ErrorMessage"),t=p("Form");return v(),y("div",O,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=n=>{a.$emit("close")})}),e("div",D,[o.loading?(v(),R(c,{key:0})):$("",!0),e("div",{class:"close",onClick:s[1]||(s[1]=n=>{a.$emit("close")})}),H,l(t,{onSubmit:o.login,class:"home-form","validation-schema":o.validationSchema},{default:m(()=>[e("div",J,[l(i,{name:"email"},{default:m(({field:n,errors:g})=>[e("input",u(n,{type:"email",class:["form-input",{invalid:!!g.length}],placeholder:"E-mail"}),null,16)]),_:1}),l(d,{class:"alert",name:"email"})]),e("div",G,[l(i,{name:"password"},{default:m(({field:n,errors:g})=>[e("input",u(n,{type:"password",class:["form-input",{invalid:!!g.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),l(d,{class:"alert",name:"password"})]),Q,e("div",X,[w("\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?\xA0"),e("span",{class:"underline link",onClick:s[2]||(s[2]=n=>{a.$emit("switchReg")})},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F")]),e("div",Y,[w("\u0417\u0430\u0431\u044B\u043B \u043F\u0430\u0440\u043E\u043B\u044C?\xA0"),e("span",{class:"underline link",onClick:s[3]||(s[3]=n=>{a.$emit("forget")})},"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C")])]),_:1},8,["onSubmit","validation-schema"])])])}const Ue=A(K,[["render",Z]]);function ee(){const a=b();return{universities:a,getUniversities:async()=>{try{const r=await S.get("/api/universities");a.value=r.data}catch(r){console.log(r.message)}}}}const se={name:"TheRegisterFormWizard",props:["validationSchema"],emits:["submitForm","switchReg"],components:{vSelect:W,Field:q,ErrorMessage:M},setup(a,{emit:s}){const r=E(),o=b(0),{universities:_,getUniversities:h}=ee(),c=b(!1),i=b(null);x(async()=>{h()});const d=U(()=>a.validationSchema[o.value]),{values:t,handleSubmit:n}=N({validationSchema:d,keepValuesOnUnmount:!0}),g=async k=>{try{return(await axios.post("/api/email",{email:k.email})).data}catch(L){console.log(L.message)}};return{submit:n(async k=>{if(o.value===0)if(await g(k)===0){o.value++;return}else{r.dispatch("notification/displayMessage",{value:"Email \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442!",type:"error"});return}k.university_id=i.value,s("submitForm",k)}),step:o,universities:_,dateInit:c,university_id:i}}},C=a=>(T("data-v-149fb97b"),a=a(),B(),a),oe={class:"form-control"},te={class:"form-control"},ne={class:"form-control"},ae=C(()=>e("div",{class:"form-info mb15"},[w("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 "),e("a",{class:"underline link",target:"_blank",href:"/page/privacy"},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")],-1)),ie={class:"form-info jcc"},le={key:1,class:"reg-step"},re={class:"form-control"},ce={class:"form-control"},de={class:"form-control"},me={class:"form-control"},ue=["type"],pe={class:"form-control"},_e=C(()=>e("div",{class:"form-info mb15"},"\u0415\u0441\u043B\u0438 \u0432\u0430\u0448\u0435\u0433\u043E \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430 \u043D\u0435\u0442, \u0442\u043E \u043F\u0440\u043E\u043F\u0443\u0441\u0442\u0435 \u044D\u0442\u043E \u043F\u043E\u043B\u0435",-1)),ve=C(()=>e("div",{class:"form-info mb15"},[w("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 \xA0 "),e("a",{class:"underline link",target:"_blank",href:"/page/privacy"},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")],-1)),fe=C(()=>e("button",{class:"btn btn-default btn-home"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F",-1)),he={class:"form-info jcc"};function ge(a,s,r,o,_,h){const c=p("Field"),i=p("ErrorMessage"),d=p("v-select");return v(),y("form",{onSubmit:s[6]||(s[6]=(...t)=>o.submit&&o.submit(...t)),class:"home-form",autocomplete:"off"},[o.step===0?(v(),y("div",{key:0,class:"reg-step",onKeyup:s[2]||(s[2]=j((...t)=>o.submit&&o.submit(...t),["enter"]))},[e("div",oe,[l(c,{name:"email"},{default:m(({field:t,errors:n})=>[e("input",u(t,{type:"email",class:["form-input",{invalid:!!n.length}],placeholder:"E-mail"}),null,16)]),_:1}),l(i,{class:"alert",name:"email"})]),e("div",te,[l(c,{name:"password"},{default:m(({field:t,errors:n})=>[e("input",u(t,{type:"password",class:["form-input",{invalid:!!n.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),l(i,{class:"alert",name:"password"})]),e("div",ne,[l(c,{name:"password_confirmation"},{default:m(({field:t,errors:n})=>[e("input",u(t,{type:"password",class:["form-input",{invalid:!!n.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C \u0435\u0449\u0435 \u0440\u0430\u0437"}),null,16)]),_:1}),l(i,{class:"alert",name:"password_confirmation"})]),ae,e("div",{class:"btn btn-default btn-home",onClick:s[0]||(s[0]=(...t)=>o.submit&&o.submit(...t))},"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C (1 \u0438\u0437 2)"),e("div",ie,[w("\u0415\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?\xA0"),e("span",{class:"underline link",onClick:s[1]||(s[1]=t=>a.$emit("switchReg"))},"\u0412\u043E\u0439\u0442\u0438")])],32)):$("",!0),o.step===1?(v(),y("div",le,[e("div",re,[l(c,{name:"surname"},{default:m(({field:t,errors:n})=>[e("input",u(t,{type:"text",class:["form-input",{invalid:!!n.length}],placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"}),null,16)]),_:1}),l(i,{class:"alert",name:"surname"})]),e("div",ce,[l(c,{name:"name"},{default:m(({field:t,errors:n})=>[e("input",u(t,{type:"text",class:["form-input",{invalid:!!n.length}],placeholder:"\u0418\u043C\u044F"}),null,16)]),_:1}),l(i,{class:"alert",name:"name"})]),e("div",de,[l(c,{name:"patronymic"},{default:m(({field:t,errors:n})=>[e("input",u(t,{type:"text",class:["form-input",{invalid:!!n.length}],placeholder:"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"}),null,16)]),_:1}),l(i,{class:"alert",name:"patronymic"})]),e("div",me,[l(c,{name:"birth"},{default:m(({field:t,errors:n})=>[e("input",u(t,{type:o.dateInit?"date":"text",onFocus:s[3]||(s[3]=g=>o.dateInit=!0),class:["form-input",{invalid:!!n.length},"form-date"],placeholder:"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"}),null,16,ue)]),_:1}),l(i,{class:"alert",name:"birth"})]),e("div",pe,[l(c,{name:"university_id"},{default:m(({field:t})=>[l(d,u({options:o.universities,placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442"},t,{modelValue:o.university_id,"onUpdate:modelValue":s[4]||(s[4]=n=>o.university_id=n)}),null,16,["options","modelValue"]),l(i,{class:"alert",name:"university_id"})]),_:1})]),_e,ve,fe,e("div",he,[e("span",{class:"underline link",onClick:s[5]||(s[5]=t=>o.step=0)},"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430\u0437\u0430\u0434 (2 \u0438\u0437 2)")])])):$("",!0)],32)}const be=A(se,[["render",ge],["__scopeId","data-v-149fb97b"]]),ye={class:"modal"},$e={class:"modal-container"},we=e("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F",-1),je={__name:"AppRegisterForm",emits:["close","switchReg"],setup(a,{emit:s}){const r=E(),o=b(!1),_=[F({email:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(8,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),password_confirmation:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").oneOf([z("password")],"\u041F\u0430\u0440\u043E\u043B\u0438 \u0434\u043E\u043B\u0436\u043D\u044B \u0441\u043E\u0432\u043F\u043E\u0434\u0430\u0442\u044C")}),F({surname:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043C\u0438\u043B\u0438\u044E").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432").matches(/^[а-яёА-ЯЁ\s]*$/,"\u0421\u0442\u0440\u043E\u043A\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0440\u0443\u0441\u0441\u043A\u0438\u0435 \u0431\u0443\u043A\u0432\u044B"),name:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432").matches(/^[а-яёА-ЯЁ\s]*$/,"\u0421\u0442\u0440\u043E\u043A\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0440\u0443\u0441\u0441\u043A\u0438\u0435 \u0431\u0443\u043A\u0432\u044B"),patronymic:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u0442\u0447\u0435\u0441\u0442\u0432\u043E").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432").matches(/^[а-яёА-ЯЁ\s]*$/,"\u0421\u0442\u0440\u043E\u043A\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0440\u0443\u0441\u0441\u043A\u0438\u0435 \u0431\u0443\u043A\u0432\u044B"),birth:P().required("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F").max(new Date("2007-12-31"),"\u0413\u043E\u0434 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043F\u043E\u0437\u0436\u0435 2008"),university_id:F().nullable()})],h=async i=>{try{o.value=!0,await S.get("/sanctum/csrf-cookie"),i.university_id=i.university_id?i.university_id.code:null,await S.post("/register",i),r.dispatch("auth/login",{email:i.email,password:i.password})}catch(d){console.log(d.message),r.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430! \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0438\u043B\u0438 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",type:"error"}),o.value=!1}},c=()=>{s("switchReg")};return(i,d)=>(v(),y("div",ye,[e("div",{class:"modal-background",onClick:d[0]||(d[0]=t=>{i.$emit("close")})}),e("div",$e,[e("div",{class:"close",onClick:d[1]||(d[1]=t=>{i.$emit("close")})}),o.value?(v(),R(I,{key:0})):$("",!0),we,l(be,{"validation-schema":_,onSubmitForm:h,onSwitchReg:c})])]))}},ke={name:"AppForgetPassword",components:{Field:q,Form:V,ErrorMessage:M,AppLoader:I},emits:["close","change"],setup(){E();const a=b(!1),s=F({email:f().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail")}),r=b(!1);return{validationSchema:s,loading:a,reset:async _=>{a.value=!0;try{await S.get("/sanctum/csrf-cookie"),await S.post("/forgot-password",{email:_.email}),r.value="\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443!"}catch(h){console.log(h.message)}a.value=!1,r.value=!0},msg:r}}},Fe={class:"modal"},Se={class:"modal-container"},Ee={key:1,class:"loading-overlay"},Ce=e("h2",null,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",-1),Ae={class:"form-control"},Re=e("button",{class:"btn btn-default btn-home"},"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",-1),qe={class:"form-info jcc"};function Me(a,s,r,o,_,h){const c=p("AppLoader"),i=p("Field"),d=p("ErrorMessage"),t=p("Form");return v(),y("div",Fe,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=n=>{a.$emit("close")})}),e("div",Se,[e("div",{class:"close",onClick:s[1]||(s[1]=n=>{a.$emit("close")})}),o.loading?(v(),R(c,{key:0})):$("",!0),o.msg?(v(),y("div",Ee," \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443 ")):$("",!0),Ce,l(t,{onSubmit:o.reset,class:"home-form","validation-schema":o.validationSchema},{default:m(()=>[e("div",Ae,[l(i,{name:"email"},{default:m(({field:n,errors:g})=>[e("input",u(n,{type:"email",class:["form-input",{invalid:!!g.length}],placeholder:"E-mail"}),null,16)]),_:1}),l(d,{class:"alert",name:"email"})]),Re,e("div",qe,[w("\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043E\u0431\u0440\u0430\u0442\u043D\u043E\xA0"),e("span",{class:"underline link",onClick:s[2]||(s[2]=n=>{a.$emit("change")})},"\u0412\u043E\u0439\u0442\u0438")])]),_:1},8,["onSubmit","validation-schema"])])])}const Te=A(ke,[["render",Me]]);export{Ue as A,je as _,Te as a};
