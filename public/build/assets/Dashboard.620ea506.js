import{_ as I,u as M,r as g,o as l,c as d,b as a,S as ee,Y as te,V as F,Q as $,U as W,F as S,P as T,f,h as x,I as E,J as L,i as U,g as D,d as A,w as V,q as w,m as se,Z as ae,$ as ne,v as oe,e as C,G as ie,a as H}from"./app.0c395d70.js";import{c as le,b as ce,F as re,E as de,a as ue,A as J}from"./logo.c2f4b021.js";import{t as q}from"./time.a44078dd.js";import{A as _e}from"./AppHeader.02c04d34.js";const ve=e=>(E("data-v-525f8223"),e=e(),L(),e),pe={key:0,class:"user-item"},me={class:"user-item__content"},ge={class:"user-item__btn"},fe={key:1,class:"user-item"},he={class:"user-item__content"},ye={class:"user-item__name"},$e=["onClick"],be=ve(()=>a("i",{class:"ri-add-large-line"},null,-1)),ke=[be],we={key:2,class:"search-container"},Ce=["onClick"],Se={class:"search-candidate__name"},xe={__name:"AppUserSearchForm",props:["team_id"],emits:["invite","load","update"],setup(e,{emit:t}){const o=e,s=M(),v=g(null),i=g(null),n=g(null),c=g(!1),p=async()=>{if(c.value===!0){v.value="",c.value=!1;return}if(v.value.length>0){const u=await x.post("/api/user/search",{user:v.value});u.data.length>0?(i.value=u.data,c.value=!0):i.value=null}else i.value=null},b=u=>{v.value="",c.value=!1,i.value=null,n.value=u},y=async()=>{try{if(t("load"),n.value){const u=await x.post("/api/team-invite",{team_id:o.team_id,user_id:n.value.id});n.value=null,s.dispatch("notification/displayMessage",{value:"\u041F\u0440\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E",type:"primary"}),t("invite",u.data),t("load")}else s.dispatch("notification/displayMessage",{value:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",type:"error"}),t("load")}catch(u){console.log(u.message),s.dispatch("notification/displayMessage",{value:u.response.data.message,type:"error"}),t("load")}t("update")};return(u,r)=>(l(),d("form",{class:"invite-form",onSubmit:r[4]||(r[4]=W(()=>{},["prevent"]))},[n.value?(l(),d("div",fe,[a("div",he,[a("div",ye,$(n.value.surname)+" "+$(n.value.name),1),a("div",{class:"user-item__cancel",onClick:r[2]||(r[2]=_=>n.value=null)},"\u0423\u0431\u0440\u0430\u0442\u044C")]),a("div",{class:"user-item__invite",onClick:r[3]||(r[3]=_=>n.value=null)},[a("button",{onClick:W(y,["prevent"]),title:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"btn btn-default btn-team"},ke,8,$e)])])):(l(),d("div",pe,[a("div",me,[ee(a("input",{class:"form-input__user-search",type:"text",id:"user","onUpdate:modelValue":r[0]||(r[0]=_=>v.value=_),onInput:r[1]||(r[1]=_=>c.value=!1),placeholder:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C (\u0424\u0430\u043C\u0438\u043B\u0438\u044F\\email\\id)",autocomplete:"off"},null,544),[[te,v.value]])]),a("div",ge,[a("div",{onClick:p,class:F(["btn",{"btn-default":!c.value,"btn-border":c.value}])},[a("i",{class:F(c.value?"ri-close-large-line":"ri-search-2-line")},null,2)],2)])])),i.value&&v.value.length>0&&c.value?(l(),d("div",we,[(l(!0),d(S,null,T(i.value,_=>(l(),d("div",{class:"search-candidate",key:_.id,onClick:k=>b(_)},[a("div",Se,$(_.surname)+" "+$(_.name)+" "+$(_.patronymic),1)],8,Ce))),128))])):f("",!0)],32))}},Ae=I(xe,[["__scopeId","data-v-525f8223"]]);const j=e=>(E("data-v-b1d03ae8"),e=e(),L(),e),Ie={key:0,class:"team-invites"},Te=j(()=>a("h3",null,"\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u044F \u0432 \u043A\u043E\u043C\u0430\u043D\u0434\u0443",-1)),Me={class:"team-invite__item-name"},De={class:"b500"},Ee={class:"team-invite__buttons"},Le=["onClick"],Ue=j(()=>a("i",{class:"ri-check-line"},null,-1)),qe=[Ue],Re=["onClick"],Fe=j(()=>a("i",{class:"ri-close-line"},null,-1)),Oe=[Fe],Pe={__name:"AppTeamInvite",props:["load"],emits:["load","update"],setup(e,{emit:t}){const o=g([]),s=M();U(async()=>{const n=await x.get("/api/team-invite/show");o.value=n.data.invites});const v=async(n,c)=>{t("load");try{await x.delete(`/api/team-invite/${n}/delete`),o.value.splice(c,1),s.dispatch("notification/displayMessage",{value:"\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u043E\u0442\u043A\u043B\u043E\u043D\u0435\u043D\u043E",type:"primary"}),t("load")}catch{t("load"),s.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043A\u043B\u043E\u043D\u0435\u043D\u0438\u0438 \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u044F",type:"error"})}},i=async n=>{t("load");try{await x.post(`/api/team-invite/${n}/accept`),o.value=[],s.dispatch("notification/displayMessage",{value:"\u0412\u044B \u0432\u0441\u0442\u0443\u043F\u0438\u043B\u0438 \u0432 \u043A\u043E\u043C\u0430\u043D\u0434\u0443",type:"primary"}),t("update"),t("load")}catch(c){console.log(c.message),s.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0438 \u0432 \u043A\u043E\u043C\u0430\u043D\u0434\u0443",type:"error"}),t("load")}};return(n,c)=>o.value.length>0?(l(),d("div",Ie,[Te,(l(!0),d(S,null,T(o.value,(p,b)=>(l(),d("div",{class:"team-invite__item",key:p.id},[a("div",Me,[D(" \u041A\u043E\u043C\u0430\u043D\u0434\u0430: "),a("span",De,$(p.name),1)]),a("div",Ee,[a("div",{class:"btn btn-default btn-team btn-accept",onClick:y=>i(p.id),title:"\u041F\u0440\u0438\u043D\u044F\u0442\u044C"},qe,8,Le),a("div",{class:"btn btn-border btn-team btn-cancel",onClick:y=>v(p.id,b),title:"\u041E\u0442\u043A\u0430\u0437\u0430\u0442\u044C\u0441\u044F"},Oe,8,Re)])]))),128))])):f("",!0)}},G=I(Pe,[["__scopeId","data-v-b1d03ae8"]]),Ve={name:"AppConfirmation",emits:["close","confirmation"],props:["question"],setup(e){return{question:g(e.question)}}},Be={class:"modal"},je={class:"modal-container"};function Ne(e,t,o,s,v,i){return l(),d("div",Be,[a("div",{class:"modal-background",onClick:t[0]||(t[0]=n=>e.$emit("close"))}),a("div",je,[a("h3",null,$(s.question),1),a("div",{class:"btn btn-cancel btn-border btn-full-width mb15",onClick:t[1]||(t[1]=n=>e.$emit("confirmation"))},"\u0414\u0430"),a("div",{class:"btn btn-accept btn-default btn-full-width",onClick:t[2]||(t[2]=n=>e.$emit("close"))},"\u041D\u0435\u0442")])])}const Z=I(Ve,[["render",Ne]]);const Q=e=>(E("data-v-b4167397"),e=e(),L(),e),We={class:"content-block create-team"},Ge={class:"form-control"},Ze=Q(()=>a("label",{for:"name"},"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u043D\u043E\u0432\u0443\u044E \u043A\u043E\u043C\u0430\u043D\u0434\u0443",-1)),ze=Q(()=>a("button",{class:"btn btn-default btn-full-width"},"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043E\u043C\u0430\u043D\u0434\u0443",-1)),He={__name:"AppCreateTeam",emits:["loading","loadData"],setup(e,{emit:t}){const o=M(),s=le({name:ce().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435").min(3,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043E\u0442 3-\u0445 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432").max(64,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0434\u043E 64-\u0445 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432")}),v=async i=>{t("loading",!0);try{await axios.post("/api/team/store",{name:i.name}),t("loadData")}catch(n){n.response.status===422?o.dispatch("notification/displayMessage",{value:"\u0422\u0430\u043A\u043E\u0435 \u0438\u043C\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u044B \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",type:"error"}):console.log(n.message)}t("loading",!1)};return(i,n)=>(l(),d("div",We,[A(w(ue),{onSubmit:v,"validation-schema":w(s)},{default:V(()=>[a("div",Ge,[Ze,A(w(re),{name:"name"},{default:V(({field:c,errors:p})=>[a("input",se(c,{type:"text",class:["form-input",{invalid:!!p.length}],placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B"}),null,16)]),_:1}),A(w(de),{class:"alert",name:"name"})]),ze]),_:1},8,["validation-schema"])]))}},Je=I(He,[["__scopeId","data-v-b4167397"]]),Qe="/build/assets/crown.cd3f701d.svg";function Ye(e){return ae()?(ne(e),!0):!1}function Y(e){return typeof e=="function"?e():w(e)}const O=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ke=Object.prototype.toString,Xe=e=>Ke.call(e)==="[object Object]",P=()=>{},et=tt();function tt(){var e,t;return O&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function R(e){var t;const o=Y(e);return(t=o==null?void 0:o.$el)!=null?t:o}const K=O?window:void 0;O&&window.document;O&&window.navigator;O&&window.location;function B(...e){let t,o,s,v;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,s,v]=e,t=K):[t,o,s,v]=e,!t)return P;Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]);const i=[],n=()=>{i.forEach(y=>y()),i.length=0},c=(y,u,r,_)=>(y.addEventListener(u,r,_),()=>y.removeEventListener(u,r,_)),p=oe(()=>[R(t),Y(v)],([y,u])=>{if(n(),!y)return;const r=Xe(u)?{...u}:u;i.push(...o.flatMap(_=>s.map(k=>c(y,_,k,r))))},{immediate:!0,flush:"post"}),b=()=>{p(),n()};return Ye(b),b}let z=!1;function st(e,t,o={}){const{window:s=K,ignore:v=[],capture:i=!0,detectIframe:n=!1}=o;if(!s)return P;et&&!z&&(z=!0,Array.from(s.document.body.children).forEach(r=>r.addEventListener("click",P)),s.document.documentElement.addEventListener("click",P));let c=!0;const p=r=>v.some(_=>{if(typeof _=="string")return Array.from(s.document.querySelectorAll(_)).some(k=>k===r.target||r.composedPath().includes(k));{const k=R(_);return k&&(r.target===k||r.composedPath().includes(k))}}),y=[B(s,"click",r=>{const _=R(e);if(!(!_||_===r.target||r.composedPath().includes(_))){if(r.detail===0&&(c=!p(r)),!c){c=!0;return}t(r)}},{passive:!0,capture:i}),B(s,"pointerdown",r=>{const _=R(e);c=!p(r)&&!!(_&&!r.composedPath().includes(_))},{passive:!0}),n&&B(s,"blur",r=>{setTimeout(()=>{var _;const k=R(e);((_=s.document.activeElement)==null?void 0:_.tagName)==="IFRAME"&&!(k!=null&&k.contains(s.document.activeElement))&&t(r)},0)})].filter(Boolean);return()=>y.forEach(r=>r())}const at={__name:"TeamModal",props:["open","owner"],emits:["remove","open","modal"],setup(e,{emit:t}){const o=e,s=g(null);return st(s,()=>t("modal")),(v,i)=>(l(),d("div",{class:"team-modal",ref_key:"target",ref:s},[a("div",{class:"team-modal__item",onClick:i[0]||(i[0]=n=>t("open"))},$(o.open?"\u0417\u0430\u043A\u0440\u044B\u0442\u044C":"\u041E\u0442\u043A\u0440\u044B\u0442\u044C"),1),a("div",{class:"team-modal__item",onClick:i[1]||(i[1]=n=>t("remove"))},$(e.owner?"\u0420\u0430\u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043E\u043C\u0430\u043D\u0434\u0443":"\u041F\u043E\u043A\u0438\u043D\u0443\u0442\u044C \u043A\u043E\u043C\u0430\u043D\u0434\u0443"),1)],512))}},nt=I(at,[["__scopeId","data-v-a09c5499"]]);const N=e=>(E("data-v-8bf70930"),e=e(),L(),e),ot={class:"team-head b500"},it={class:"teammate-container"},lt={class:"user-item__content"},ct={class:"user-item__name"},rt={key:0,class:"user-item__icon"},dt=N(()=>a("img",{src:Qe,alt:"crown"},null,-1)),ut=[dt],_t=["onClick"],vt=N(()=>a("div",{class:"btn btn-border btn-team btn-cancel",title:"\u0418\u0441\u043A\u043B\u044E\u0447\u0438\u0442\u044C"},[a("i",{class:"ri-delete-bin-2-line"})],-1)),pt=[vt],mt={key:0,class:"team-invites"},gt={class:"user-item__content"},ft={class:"user-item__name"},ht=["onClick"],yt=N(()=>a("div",{class:"btn btn-border btn-team btn-cancel",title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"},[a("i",{class:"ri-close-line"})],-1)),$t=[yt],bt={__name:"TeamContainer",props:["team"],emits:["loading","update"],setup(e,{emit:t}){const o=e,s=M(),v=g([]),i=g(!1),n=g(o.team.user_id===s.getters["auth/user"].id),c=g(!1),p=g(null),b=g(!1),y=g([]),u=async()=>{const k=await x.get(`/api/team/edit/${o.team.id}`);v.value=await k.data.users,y.value=await k.data.invites};U(async()=>{await u()});const r=async k=>{t("loading",!0);try{await x.post("/api/team/remove-teammate",{user_id:k,team_id:o.team.id}),s.dispatch("notification/displayMessage",{value:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043F\u043E\u043A\u0438\u043D\u0443\u043B \u043A\u043E\u043C\u0430\u043D\u0434\u0443",type:"primary"}),c.value=!1,await u(),t("update")}catch(m){console.log(m.message),s.dispatch("notification/displayMessage",{value:m.response.data.message,type:"error"})}t("loading",!1)},_=async k=>{t("loading",!0);try{await x.delete(`/api/team-invite/${k}/delete`),s.dispatch("notification/displayMessage",{value:"\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u043E\u0442\u043C\u0435\u043D\u0435\u043D\u043E",type:"primary"})}catch(m){console.log(m.message),s.dispatch("notification/displayMessage",{value:m.message,type:"error"})}await u(),t("loading",!1)};return(k,m)=>(l(),d("div",{class:F(["team-container",{"team-open":i.value}])},[a("div",ot,[a("div",{class:"team-head__title",onClick:m[0]||(m[0]=h=>i.value=!i.value)},$(e.team.name),1),D(),a("i",{onClick:m[1]||(m[1]=h=>b.value=!0),class:"ri-settings-4-fill"})]),b.value?(l(),C(nt,{key:0,owner:n.value,open:i.value,onOpen:m[2]||(m[2]=h=>{i.value=!i.value,b.value=!1}),onRemove:m[3]||(m[3]=h=>c.value=!0),onModal:m[4]||(m[4]=h=>b.value=!1)},null,8,["owner","open"])):f("",!0),a("div",it,[(l(!0),d(S,null,T(v.value,h=>(l(),d("div",{class:"user-item",key:h.id},[a("div",lt,[a("div",ct,$(h.surname)+" "+$(h.name)+" "+$(h.patronymic),1)]),e.team.user_id===h.id?(l(),d("div",rt,ut)):f("",!0),n.value&&e.team.user_id!==h.id?(l(),d("div",{key:1,class:"user-item__btn user-item__cancel-btn",onClick:X=>p.value=h.id},pt,8,_t)):f("",!0)]))),128)),y.value&&y.value.length>0?(l(),d("div",mt,[(l(!0),d(S,null,T(y.value,h=>(l(),d("div",{class:"user-item",key:h.id},[a("div",gt,[a("div",ft,$(h.surname)+" "+$(h.name)+" "+$(h.patronymic),1)]),a("div",{class:"user-item__btn",onClick:X=>_(h.id)},$t,8,ht)]))),128))])):f("",!0),n.value&&v.value.length<4?(l(),C(Ae,{key:1,team_id:e.team.id,onUpdate:m[5]||(m[5]=h=>{t("update"),u()})},null,8,["team_id"])):f("",!0)]),c.value?(l(),C(Z,{key:1,onConfirmation:m[6]||(m[6]=h=>r(o.team.user_id)),onClose:m[7]||(m[7]=h=>c.value=!1),question:n.value?"\u0420\u0430\u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043E\u043C\u0430\u043D\u0434\u0443?":"\u041F\u043E\u043A\u0438\u043D\u0443\u0442\u044C \u043A\u043E\u043C\u0430\u043D\u0434\u0443?"},null,8,["question"])):f("",!0),p.value!==null?(l(),C(Z,{key:2,onConfirmation:m[8]||(m[8]=h=>{r(p.value),p.value=null}),onClose:m[9]||(m[9]=h=>p.value=null),question:"\u0418\u0441\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0438\u0437 \u043A\u043E\u043C\u0430\u043D\u0434\u044B?"})):f("",!0)],2))}},kt=I(bt,[["__scopeId","data-v-8bf70930"]]);const wt=e=>(E("data-v-e961a4d7"),e=e(),L(),e),Ct={class:"dashboard-item"},St=wt(()=>a("h3",null,"\u041A\u043E\u043C\u0430\u043D\u0434\u044B",-1)),xt={key:1,class:"content-block team-content"},At={class:"content-block"},It={key:0,class:"dashboard-item"},Tt={__name:"TheTeamSettings",setup(e){M();const t=g([]),o=g(!1),s=()=>{o.value=!o.value},v=async()=>{o.value=!0;try{const i=await x.get("/api/team/show");t.value=i.data}catch(i){console.log(i.message)}o.value=!1};return U(async()=>{await v()}),(i,n)=>(l(),d(S,null,[a("div",Ct,[o.value?(l(),C(J,{key:0})):f("",!0),St,t.value?(l(),d("div",xt,[(l(!0),d(S,null,T(t.value,c=>(l(),C(kt,{key:c.id,team:c,onLoading:n[0]||(n[0]=p=>{o.value=p}),onUpdate:n[1]||(n[1]=p=>v())},null,8,["team"]))),128))])):f("",!0),a("div",At,[A(G,{onUpdate:n[2]||(n[2]=c=>v())})]),t.value.length<3?(l(),C(Je,{key:2,onLoading:n[3]||(n[3]=c=>{o.value=c}),onLoadData:n[4]||(n[4]=c=>v())})):f("",!0)]),i.invites&&i.invites.length>0?(l(),d("div",It,[A(G,{onUpdate:v,onLoad:s})])):f("",!0)],64))}},Mt=I(Tt,[["__scopeId","data-v-e961a4d7"]]);const Dt=e=>(E("data-v-6c00a281"),e=e(),L(),e),Et={key:0,class:"team-list"},Lt=Dt(()=>a("div",{class:"team-list__header"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u0443",-1)),Ut=["onClick"],qt={key:1,class:"team-notification"},Rt={key:2,class:"btn btn-disable btn-settings-280"},Ft={__name:"TeamStageReg",props:["status","stage"],emits:["reg","cancel"],setup(e,{emit:t}){const o=e,s=M(),v=s.getters["auth/user"],i=g(o.status),n=g([]),c=g(null),p=g({});U(async()=>{const u=await axios.get("/api/team/capitan");if(n.value=u.data.teams,o.status){const r=await axios.get(`/api/stage/${o.stage}/reg-info`);p.value=r.data.team}});const b=async()=>{try{const u=await axios.post("/api/stage/accept",{stage_id:o.stage,team_id:c.value});u.data.result&&(t("reg"),p.value=u.data.team,i.value=!0,s.dispatch("notification/displayMessage",{value:"\u041A\u043E\u043C\u0430\u043D\u0434\u0430 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u0430",type:"primary"}))}catch(u){console.log(u.message),s.dispatch("notification/displayMessage",{value:u.message,type:"error"})}},y=async()=>{try{(await axios.post("/api/stage/cancel",{stage_id:o.stage,team_id:p.value.id})).data.result&&(t("cancel"),c.value=null,p.value={},i.value=!1,s.dispatch("notification/displayMessage",{value:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043E\u0442\u043C\u0435\u043D\u0435\u043D\u0430",type:"primary"}))}catch(u){console.log(u.message)}};return(u,r)=>(l(),d(S,null,[n.value.length>0&&!i.value?(l(),d("div",Et,[Lt,(l(!0),d(S,null,T(n.value,_=>(l(),d("div",{class:F(["team-list__item",{"team-list__item-select":_.id===c.value}]),key:_.id,onClick:k=>c.value=_.id},$(_.name),11,Ut))),128)),c.value!==null?(l(),d("div",{key:0,class:"btn btn-default",onClick:b},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C")):f("",!0)])):f("",!0),n.value.length===0&&!i.value?(l(),d("div",qt," \u0412\u044B \u043D\u0435 \u0441\u043E\u0441\u0442\u043E\u0438\u0442\u0435 \u0432 \u043A\u043E\u043C\u0430\u043D\u0434\u0435 \u0438\u043B\u0438 \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0435\u0441\u044C \u043A\u0430\u043F\u0438\u0442\u0430\u043D\u043E\u043C ")):f("",!0),i.value&&p.value?(l(),d("div",Rt,'\u041A\u043E\u043C\u0430\u043D\u0434\u0430 "'+$(p.value.name)+'" \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u0430',1)):f("",!0),i.value&&p.value.user_id===w(v).id?(l(),d("div",{key:3,class:"btn btn-default",onClick:y},"\u041E\u0442\u043A\u0430\u0437\u0430\u0442\u044C\u0441\u044F")):f("",!0)],64))}},Ot=I(Ft,[["__scopeId","data-v-6c00a281"]]),Pt={class:"dash-stage"},Vt={class:"dash-stage__header"},Bt={class:"dash-stage__tournament"},jt={key:0,class:"user-stage__participant"},Nt={class:"dash-stage__date"},Wt={key:1,class:"btn btn-disable btn-settings-280"},Gt={key:4,class:"btn btn-disable btn-settings-280"},Zt={__name:"AppDashStages",props:["stage"],setup(e){const t=e,o=()=>{const p=new Date().toLocaleString("ru-RU",{timeZone:"Europe/Moscow"}).split(",");n.value=`${p[0]} ${p[1]}`};M();const s=g(t.stage),v=g(!1),i=g(!1),n=g();U(()=>{o()});const c=setInterval(o,1e3);return ie(()=>{clearInterval(c)}),(p,b)=>{const y=H("router-link");return l(),d("div",Pt,[v.value?(l(),C(J,{key:0})):f("",!0),a("div",Vt,[A(y,{to:`/dashboard/stage/${s.value.id}`,class:"dash-stage__title"},{default:V(()=>[D($(s.value.title),1)]),_:1},8,["to"]),a("div",Bt,$(s.value.tournament),1),s.value.users_exists?(l(),d("div",jt,"\u0412\u044B \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442\u0435")):f("",!0)]),a("div",Nt,[a("span",null,"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+$(w(q)(s.value.register_start)),1),a("span",null,"\u041E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+$(w(q)(s.value.register_end)),1)]),w(q)(s.value.register_start)>n.value?(l(),d("div",Wt," \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0430\u0441\u044C ")):f("",!0),i.value||s.value.users_exists?(l(),C(Ot,{key:2,stage:s.value.id,status:s.value.users_exists,onReg:b[0]||(b[0]=u=>s.value.users_exists=!0),onCancel:b[1]||(b[1]=u=>{i.value=!1,s.value.users_exists=!1})},null,8,["stage","status"])):f("",!0),s.value.status==="active"&&w(q)(s.value.register_end)>n.value&&!i.value&&!s.value.users_exists?(l(),d("div",{key:3,class:F(["btn","btn-settings-280","btn-default"]),onClick:b[2]||(b[2]=u=>i.value=!0)},"\u041F\u0440\u0438\u043D\u044F\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u0438\u0435")):f("",!0),w(q)(s.value.register_end)<n.value?(l(),d("div",Gt," \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u043B\u0430\u0441\u044C ")):f("",!0)])}}},zt={name:"AppDashActualStages",components:{AppDashStages:Zt},setup(){const e=g();return U(async()=>{try{const t=await axios.get("/api/stage/actual/dashboard");e.value=t.data}catch(t){console.log(t.message)}}),{stages:e}}};function Ht(e,t,o,s,v,i){const n=H("AppDashStages");return l(!0),d(S,null,T(s.stages,c=>(l(),C(n,{key:c.id,stage:c},null,8,["stage"]))),128)}const Jt=I(zt,[["render",Ht]]);const Qt={class:"container-fluid g-0"},Yt={class:"row"},Kt={key:0,class:"col-12"},Xt=a("a",{target:"_blank",href:"https://t.me/chirkovka"},"\u0441\u044E\u0434\u0430",-1),es={class:"col-lg-12 col-xl-5 col-xxl-4"},ts={class:"col-lg-12 col-xl-7 col-xxl-8"},ss={class:"dashboard-item"},as=a("h3",null,"\u0410\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0435 \u0433\u043E\u043D\u043A\u0438",-1),ns={class:"dash-stage__container"},rs={__name:"Dashboard",setup(e){const t=g(!!localStorage.getItem("greeting")),o=()=>{localStorage.setItem("greeting",!0),t.value=!0};return(s,v)=>(l(),d(S,null,[A(_e,null,{default:V(()=>[D("\u041B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442")]),_:1}),a("main",null,[a("div",Qt,[a("div",Yt,[t.value?f("",!0):(l(),d("div",Kt,[a("div",{class:"dashboard-item greeting"},[D(" \u041F\u0440\u0438\u0432\u0435\u0442! \u0420\u0430\u0434\u044B \u0432\u0438\u0434\u0435\u0442\u044C \u0442\u0435\u0431\u044F \u043D\u0430 \u043D\u0430\u0448\u0435\u043C \u0441\u0430\u0439\u0442\u0435 :) \u0412\u0441\u044F \u0441\u0438\u0441\u0442\u0435\u043C\u0430 \u043D\u0430\u0445\u043E\u0434\u0438\u0442\u0441\u044F \u043D\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F, \u0438 \u043D\u0430\u043C \u043E\u0447\u0435\u043D\u044C \u0432\u0430\u0436\u043D\u043E \u0437\u043D\u0430\u0442\u044C, \u0447\u0442\u043E \u043D\u0430 \u0434\u0430\u043D\u043D\u043E\u043C \u044D\u0442\u0430\u043F\u0435 \u0432\u0441\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u043A\u0430\u043A \u043D\u0430\u0434\u043E. \u0415\u0441\u043B\u0438 \u0442\u044B \u043D\u0430\u0439\u0434\u0435\u0448\u044C \u043E\u0448\u0438\u0431\u043A\u0438 \u0438\u043B\u0438 \u0431\u0443\u0434\u0443\u0442 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u2014 \u0441\u043C\u0435\u043B\u043E \u043F\u0438\u0448\u0438 \u043F\u043E \u043A\u043D\u043E\u043F\u043A\u0435 \u0432 \u043F\u0440\u0430\u0432\u043E\u043C-\u0432\u0435\u0440\u0445\u043D\u0435\u043C \u0443\u0433\u043B\u0443. \u041B\u044E\u0431\u044B\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B \u043C\u043E\u0436\u0435\u0448\u044C \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044C "),Xt,D(". "),a("div",{class:"btn btn-default btn-settings",onClick:o},"\u041F\u043E\u043D\u044F\u0442\u043D\u043E")])])),a("div",es,[A(Mt)]),a("div",ts,[a("div",ss,[as,a("div",ns,[A(Jt)])])])])])])],64))}};export{rs as default};
