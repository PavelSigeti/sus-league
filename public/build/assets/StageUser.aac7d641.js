import{A as C}from"./AppHeader.02c04d34.js";import{A as L}from"./logo.c2f4b021.js";import{t as M}from"./time.a44078dd.js";import{_ as f,u as E,r as p,i as y,G as B,a as d,o as s,c,e as u,f as m,b as o,d as x,w as h,g as k,Q as v,V as A,P as b,F as S}from"./app.0c395d70.js";const H={name:"AppUserStage",components:{AppLoader:L},props:["stage"],setup(a){const t=()=>{const i=new Date().toLocaleString("ru-RU",{timeZone:"Europe/Moscow"}).split(",");_.value=`${i[0]} ${i[1]}`},l=E(),e=p(a.stage),g=p(!1),_=p();y(()=>{t()});const r=setInterval(t,1e3);return B(()=>{clearInterval(r)}),{stage:e,loading:g,time:M,toggleReg:async()=>{g.value=!0;try{e.value.users_exists?(await axios.post(`/api/stage/${e.value.id}/cancel`),e.value.users_exists=!1,l.dispatch("notification/displayMessage",{value:"\u0412\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043A\u0430\u0437\u0430\u043B\u0438\u0441\u044C \u043E\u0442 \u0443\u0447\u0430\u0441\u0442\u0438\u0435 \u0432 \u0440\u0435\u0433\u0430\u0442\u0435",type:"primary"})):(await axios.post(`/api/stage/${e.value.id}/accept`),e.value.users_exists=!0,l.dispatch("notification/displayMessage",{value:"\u0412\u044B \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u043D\u0430 \u0440\u0435\u0433\u0430\u0442\u0443",type:"primary"}))}catch(i){console.log(i.message),l.dispatch("notification/displayMessage",{value:i.response.data.message,type:"error"})}g.value=!1},now:_}}},V={class:"user-stage"},$={class:"user-stage__header"},N={class:"user-stage__tournament"},T={key:0,class:"user-stage__participant"},D=["innerHTML"],I={class:"user-stage__date"},F={key:2,class:"user-stage__info"},z={key:4,class:"user-stage__info"},G={key:5,class:"user-stage__info"};function P(a,t,l,e,g,_){const r=d("AppLoader"),n=d("router-link");return s(),c("div",V,[e.loading?(s(),u(r,{key:0})):m("",!0),o("div",$,[x(n,{to:`/dashboard/stage/${e.stage.id}`,class:"user-stage__title"},{default:h(()=>[k(v(e.stage.title),1)]),_:1},8,["to"]),o("div",N,v(e.stage.tournament),1),e.stage.users_exists?(s(),c("div",T,"\u0412\u044B \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442\u0435")):m("",!0)]),e.stage.excerpt?(s(),c("div",{key:1,class:"user-stage__excerpt content",innerHTML:e.stage.excerpt},null,8,D)):m("",!0),o("div",I,[o("span",null,"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+v(e.time(e.stage.register_start)),1),o("span",null,"\u041E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+v(e.time(e.stage.register_end)),1)]),e.time(e.stage.register_start)>e.now?(s(),c("div",F," \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0430\u0441\u044C ")):e.stage.status==="active"&&e.time(e.stage.register_end)>e.now?(s(),c("div",{key:3,class:A(["btn","btn-settings-280",{"btn-default":!e.stage.users_exists},{"btn-border":e.stage.users_exists}]),onClick:t[0]||(t[0]=(...i)=>e.toggleReg&&e.toggleReg(...i))},v(e.stage.users_exists?"\u041E\u0442\u043A\u0430\u0437\u0430\u0442\u044C\u0441\u044F \u043E\u0442 \u0443\u0447\u0430\u0441\u0442\u0438\u044F":"\u041F\u0440\u0438\u043D\u044F\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u0438\u0435"),3)):e.stage.status==="finished"?(s(),c("div",z," \u0420\u0435\u0433\u0430\u0442\u0430 \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u043B\u0430\u0441\u044C ")):(s(),c("div",G," \u041E\u0436\u0438\u0434\u0430\u0439\u0442\u0435 ")),x(n,{to:`/dashboard/stage/${e.stage.id}`,class:"btn btn-border btn-settings-280 mt10"},{default:h(()=>[k("\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435")]),_:1},8,["to"])])}const w=f(H,[["render",P]]),Q={name:"AppActualStage",components:{AppUserStage:w},setup(){const a=p();return y(async()=>{try{const t=await axios.get("/api/stage/actual");a.value=t.data}catch(t){console.log(t.message)}}),{stages:a}}};function Z(a,t,l,e,g,_){const r=d("AppUserStage");return s(!0),c(S,null,b(e.stages,n=>(s(),u(r,{key:n.id,stage:n},null,8,["stage"]))),128)}const j=f(Q,[["render",Z]]),q={name:"AppRegisteredStage",components:{AppUserStage:w},setup(){const a=p();return y(async()=>{try{const t=await axios.get("/api/stage/registered-stage");a.value=t.data}catch(t){console.log(t.message)}}),{stages:a}}};function J(a,t,l,e,g,_){const r=d("AppUserStage");return s(!0),c(S,null,b(e.stages,n=>(s(),u(r,{key:n.id,stage:n},null,8,["stage"]))),128)}const K=f(q,[["render",J]]),O={name:"AppEndedStage",components:{AppUserStage:w},setup(){const a=p();return y(async()=>{try{const t=await axios.get("/api/stage/ended");a.value=t.data}catch(t){console.log(t.message)}}),{stages:a}}};function W(a,t,l,e,g,_){const r=d("AppUserStage");return s(!0),c(S,null,b(e.stages,n=>(s(),u(r,{key:n.id,stage:n},null,8,["stage"]))),128)}const X=f(O,[["render",W]]),Y={name:"StageUser",components:{AppHeader:C,AppActualStage:j,AppRegisteredStage:K,AppEndedStage:X},setup(){return{section:p("actual")}}},ee={class:"container-fluid g-0"},te={class:"row"},se={class:"col-12"},ae={class:"tabs"},ne={class:"col-12"};function oe(a,t,l,e,g,_){const r=d("AppHeader"),n=d("AppActualStage"),i=d("AppRegisteredStage"),R=d("AppEndedStage");return s(),c(S,null,[x(r,null,{default:h(()=>[k("\u0420\u0435\u0433\u0430\u0442\u044B")]),_:1}),o("main",null,[o("div",ee,[o("div",te,[o("div",se,[o("div",ae,[o("div",{class:A(["tab-item",{"tab-item__active":e.section==="actual"}]),onClick:t[0]||(t[0]=U=>e.section="actual")},"\u0410\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0435 \u0440\u0435\u0433\u0430\u0442\u044B",2),o("div",{class:A(["tab-item",{"tab-item__active":e.section==="registered"}]),onClick:t[1]||(t[1]=U=>e.section="registered")},"\u041C\u043E\u0438 \u0440\u0435\u0433\u0430\u0442\u044B",2),o("div",{class:A(["tab-item",{"tab-item__active":e.section==="ended"}]),onClick:t[2]||(t[2]=U=>e.section="ended")},"\u041F\u0440\u043E\u0448\u0435\u0434\u0448\u0438\u0435 \u0440\u0435\u0433\u0430\u0442\u044B",2)])]),o("div",ne,[e.section==="actual"?(s(),u(n,{key:0})):m("",!0),e.section==="registered"?(s(),u(i,{key:1})):m("",!0),e.section==="ended"?(s(),u(R,{key:2})):m("",!0)])])])])],64)}const le=f(Y,[["render",oe]]);export{le as default};
