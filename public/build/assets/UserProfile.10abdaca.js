import{A as O}from"./AppHeader.f9113254.js";import{_ as k,Y as L,r as u,t as R,J as A,o as t,c as a,e as S,f as x,F as m,Q as w,b as e,R as d,p as I,g as P,a1 as q,l as U,n as V,D as Y,h as j,u as D,G as E,d as b,w as M}from"./app.f3087576.js";import{A as C}from"./AppLoader.097883ee.js";const z="/build/assets/chevron-left.86e5cb82.svg";const T=s=>(I("data-v-b4e23638"),s=s(),P(),s),G={class:"dashboard-item"},H=T(()=>e("h3",{class:"block-label"},"\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",-1)),J={key:1,class:"info-item__container"},K={class:"info-item__label"},Q=T(()=>e("span",{class:"info-item__dots"},null,-1)),W={class:"info-item__value"},X={__name:"ProfileInfo",setup(s){const l=L(),_=u({}),n=u(!0),c=u([{key:"name",title:"\u0418\u043C\u044F"},{key:"surname",title:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},{key:"patronymic",title:"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},{key:"age",title:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442"},{key:"university",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442"},{key:"registration_date",title:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}]);return R(async()=>{try{const i=await A.get(`/api/user/${l.params.id}`);_.value=i.data,n.value=!1}catch(i){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445:",i),n.value=!1}}),(i,$)=>(t(),a("div",G,[H,n.value?(t(),S(C,{key:0,isSectionLoader:!0})):x("",!0),n.value?x("",!0):(t(),a("div",J,[(t(!0),a(m,null,w(c.value,p=>{var f,y;return t(),a("div",{key:p.key,class:"info-item__row"},[e("span",K,d(p.title),1),Q,e("span",W,d((y=(f=_.value)==null?void 0:f[p.key])!=null?y:"\u2014"),1)])}),128))]))]))}},Z=k(X,[["__scopeId","data-v-b4e23638"]]);const F=s=>(I("data-v-701f0195"),s=s(),P(),s),ee={class:"dashboard-item"},te=F(()=>e("h3",{class:"block-label"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430",-1)),se={key:1,class:"info-item__container"},ae={class:"info-item__label"},oe=F(()=>e("span",{class:"info-item__dots"},null,-1)),ie={class:"info-item__value"},ne={__name:"ProfileStatistics",setup(s){const l=u([{type:"stages_count",title:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0441\u043E\u0440\u0435\u0432\u043D\u043E\u0432\u0430\u043D\u0438\u0439"},{type:"races_count",title:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0433\u043E\u043D\u043E\u043A"},{type:"top3_count",title:"\u0422\u041E\u041F-3"},{type:"win_rate",title:"\u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043F\u043E\u0431\u0435\u0434 \u0432 \u0433\u043E\u043D\u043A\u0430\u0445"},{type:"wins_stages",title:"\u041F\u043E\u0431\u0435\u0434 \u0432 \u0440\u0435\u0433\u0430\u0442\u0435"},{type:"avg_place",title:"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442"}]),_=L(),n=u(null),c=u(!0);return R(async()=>{try{const i=await A.get(`/api/user/${_.params.id}/statistics`);n.value=i.data}catch(i){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438:",i)}finally{c.value=!1}}),(i,$)=>(t(),a("div",ee,[te,c.value?(t(),S(C,{key:0,isSectionLoader:!0})):x("",!0),c.value?x("",!0):(t(),a("div",se,[(t(!0),a(m,null,w(l.value,p=>{var f,y;return t(),a("div",{key:p.type,class:"info-item__row"},[e("span",ae,d(p.title),1),oe,e("span",ie,d((y=(f=n.value)==null?void 0:f[p.type])!=null?y:"\u2014"),1)])}),128))]))]))}},ce=k(ne,[["__scopeId","data-v-701f0195"]]);const B=s=>(I("data-v-dd5b2bae"),s=s(),P(),s),re={class:"dashboard-item"},le={class:"block-label"},_e={class:"block-subtitle"},de={key:0,class:"empty-section"},ue=B(()=>e("p",{class:"second-text"},"\u041F\u043E\u0445\u043E\u0436\u0435, \u0441\u0435\u0437\u043E\u043D \u0435\u0449\u0435 \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F",-1)),pe=[ue],ve={key:1,class:"grid-section"},ye={class:"section-name"},he={key:0,class:"second-text"},me={class:"info-item__row"},fe={key:0,class:"info-item__label"},ge=B(()=>e("span",{class:"info-item__dots"},null,-1)),ke={class:"info-item__value"},$e={key:2,class:"empty-section"},be=B(()=>e("p",{class:"second-text"},"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445",-1)),Se=[be],xe={__name:"ProfileRating",setup(s){const l=L(),_=q(),n=u([{key:"statistics",title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430",url:`/api/user/${l.params.id}/rating`},{key:"personal",title:"\u041B\u0438\u0447\u043D\u044B\u0439 \u0437\u0430\u0447\u0435\u0442",url:`/api/user/${l.params.id}/rating/personal`},{key:"team",title:"\u041A\u043E\u043C\u0430\u043D\u0434\u043D\u044B\u0439 \u0437\u0430\u0447\u0435\u0442",url:`/api/user/${l.params.id}/rating/team`},{key:"university",title:"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0441\u043A\u0438\u0439 \u0437\u0430\u0447\u0435\u0442",url:`/api/user/${l.params.id}/rating/university`}]),c=u(Object.create(null)),i=u(Object.create(null)),$=u(!0),p=U(()=>n.value.filter(r=>r.key!=="statistics").every(r=>!c.value[r.key]||c.value[r.key].length===0)),f=()=>{const g=new Date().getFullYear(),o=g+1;return`${g}/${o.toString().slice(2)}`};R(async()=>{try{const r=n.value.map(o=>A.get(o.url).then(v=>({key:o.key,data:v.data||[]})).catch(()=>({key:o.key,error:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445"}))),g=await Promise.all(r);for(const o of g)o.error?i.value[o.key]=o.error:c.value[o.key]=o.data}catch(r){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430:",r)}finally{$.value=!1}await V(),document.querySelectorAll(".link-container").forEach(r=>{r.addEventListener("click",y),r.style.cursor="pointer"})}),Y(()=>{document.querySelectorAll(".link-container").forEach(r=>{r.removeEventListener("click",y)})});const y=r=>{var h;const o=(h=r.currentTarget.querySelector(".section-name"))==null?void 0:h.textContent.trim();let v="user";o.includes("\u041B\u0438\u0447\u043D\u044B\u0439")?v="user":o.includes("\u041A\u043E\u043C\u0430\u043D\u0434\u043D\u044B\u0439")?v="team":o.includes("\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0441\u043A\u0438\u0439")&&(v="university"),_.push({path:"/dashboard/rating",query:{section:v}})};return(r,g)=>(t(),a("div",re,[e("h3",le,[j("\u0420\u0435\u0439\u0442\u0438\u043D\u0433 "),e("div",_e,"\u0441\u0435\u0437\u043E\u043D "+d(f()),1)]),$.value?(t(),S(C,{key:0,isSectionLoader:!0})):(t(),a(m,{key:1},[D(p)?(t(),a("div",de,pe)):(t(),a("div",ve,[(t(!0),a(m,null,w(n.value,o=>{var v;return t(),a("div",{key:o.key,class:"grid-item"},[e("div",{class:E(["info-item__container",{"link-container":o.key!=="statistics"}])},[e("h4",ye,d(o.title),1),i.value[o.key]?(t(),a("p",he,d(i.value[o.key]),1)):(v=c.value[o.key])!=null&&v.length?(t(!0),a(m,{key:1},w(c.value[o.key],h=>(t(),a("div",{key:h.name,class:E({"highlight-user":h.is_user})},[e("div",me,[h.name?(t(),a("span",fe,d(h.name),1)):x("",!0),ge,e("span",ke,d(h.score),1)])],2))),128)):(t(),a("div",$e,Se))],2)])}),128))]))],64))]))}},we=k(xe,[["__scopeId","data-v-dd5b2bae"]]);const Ie={class:"stage-list__item"},Pe={class:"list-item__info"},Le={class:"list-item__title"},Re={class:"list-item__subtitle"},Ae={class:"list-item__date"},Ce={class:"list-item__result-row"},qe={__name:"StageItem",props:{stage:{type:Object,required:!0}},setup(s){const l=s,_=q(),n=()=>{_.push(`/dashboard/stage/${l.stage.id}`)};return(c,i)=>(t(),a("div",Ie,[e("div",Pe,[e("div",Le,d(s.stage.title),1),e("div",Re,d(s.stage.tournament),1),e("div",Ae,"\u0414\u0430\u0442\u0430 \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F: "+d(s.stage.date),1)]),e("div",Ce," \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043A\u043E\u043C\u0430\u043D\u0434: "+d(s.stage.participants),1),e("button",{class:"btn btn-border btn-settings-280 mt10",onClick:n}," \u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435 ")]))}},Be=k(qe,[["__scopeId","data-v-8b3f275c"]]);const Ee=s=>(I("data-v-020a2eb6"),s=s(),P(),s),Te={class:"dashboard-item"},Fe=Ee(()=>e("h3",{class:"block-label"},"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0441\u043E\u0440\u0435\u0432\u043D\u043E\u0432\u0430\u043D\u0438\u0439",-1)),Ne={key:0,class:"second-text"},Oe={key:1,class:"second-text"},Ue={key:2,class:"stage-list__container"},Ve={__name:"ProfileStageList",setup(s){const l=L(),_=u([]),n=u(!0),c=u(null);return R(async()=>{try{const i=await A.get(`/api/user/${l.params.id}/stages`);_.value=i.data.length?i.data:[]}catch(i){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0441\u043E\u0440\u0435\u0432\u043D\u043E\u0432\u0430\u043D\u0438\u0439:",i),c.value="\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445"}finally{n.value=!1}}),(i,$)=>(t(),a("div",Te,[Fe,n.value?(t(),S(C,{key:0,isSectionLoader:!0})):(t(),a(m,{key:1},[c.value?(t(),a("p",Ne,d(c.value),1)):_.value.length===0?(t(),a("p",Oe,"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445")):(t(),a("div",Ue,[(t(!0),a(m,null,w(_.value,p=>(t(),S(Be,{key:p.id,stage:p},null,8,["stage"]))),128))]))],64))]))}},Ye=k(Ve,[["__scopeId","data-v-020a2eb6"]]);const N=s=>(I("data-v-a074ee88"),s=s(),P(),s),je=N(()=>e("img",{src:z,alt:"back-button"},null,-1)),De=[je],Me=N(()=>e("div",null," \u041F\u0440\u043E\u0444\u0438\u043B\u044C ",-1)),ze={class:"container-fluid g-0"},Ge={class:"row"},He={class:"col-12 profile-grid"},Je={class:"profile-info"},Ke={class:"profile-statistics"},Qe={class:"profile-rating"},We={class:"profile-stage-list"},Xe={__name:"UserProfile",setup(s){const l=q(),_=()=>{l.back()};return(n,c)=>(t(),a(m,null,[b(O,null,{default:M(()=>[e("div",{class:"header-container"},[e("button",{onClick:_,class:"back-button"},De),Me])]),_:1}),e("main",null,[e("div",ze,[e("div",Ge,[e("div",He,[e("div",Je,[b(Z)]),e("div",Ke,[b(ce)]),e("div",Qe,[b(we)]),e("div",We,[b(Ye)])])])])])],64))}},st=k(Xe,[["__scopeId","data-v-a074ee88"]]);export{st as default};
