import{_ as U,X as M,u as E,r as n,a as p,o as u,c as b,e as V,f as k,b as e,S as f,Y as v,d as g,U as L,h as A,i as N,w as C,F as S,P as H,g as D,Q as x}from"./app.9fdc73f6.js";import{A as B}from"./logo.43433f72.js";import{A as I}from"./AppEditor.af49474f.js";import{A as F}from"./AppHeader.32aaba5f.js";import{t as T}from"./time.a44078dd.js";const P={name:"AppStageCreate",components:{AppLoader:B,AppEditor:I},emits:["create"],setup(h,{emit:o}){const m=M(),t=E(),d=m.params.id,r=n(""),l=n(""),i=n(""),a=n(""),_=n(""),c=n(!1),s=n(null),y=n(null);return{register_start:r,register_end:l,title:i,excerpt:a,description:_,submit:async()=>{c.value=!0;try{const w=await A.post("/api/admin/stage/store",{tournament_id:d,register_start:r.value,register_end:l.value,title:i.value,excerpt:a.value,description:_.value});o("create",w.data),t.dispatch("notification/displayMessage",{value:"\u042D\u0442\u0430\u043F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0430",type:"primary"}),r.value=l.value=i.value="",s.value.clear(),y.value.clear(),c.value=!1}catch{t.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u044D\u0442\u0430\u043F\u0430",type:"error"}),c.value=!1}},loading:c,excerptInput:s,descriptionInput:y}}},Q=e("h3",null,"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u044D\u0442\u0430\u043F\u0430",-1),R={class:"form-control"},X=e("label",{for:"register_start"},"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",-1),Y={class:"form-control"},j=e("label",{for:"register_end"},"\u041A\u043E\u043D\u0435\u0446 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",-1),q={class:"form-control"},z=e("label",{for:"title"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",-1),G={class:"form-control"},J=e("label",{for:"title"},"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1),K={class:"form-control"},O=e("label",{for:"title"},"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1);function W(h,o,m,t,d,r){const l=p("AppLoader"),i=p("AppEditor");return u(),b("form",null,[t.loading?(u(),V(l,{key:0})):k("",!0),Q,e("div",R,[X,f(e("input",{class:"form-input",type:"datetime-local",id:"register_start","onUpdate:modelValue":o[0]||(o[0]=a=>t.register_start=a)},null,512),[[v,t.register_start]])]),e("div",Y,[j,f(e("input",{class:"form-input",type:"datetime-local",id:"register_end","onUpdate:modelValue":o[1]||(o[1]=a=>t.register_end=a)},null,512),[[v,t.register_end]])]),e("div",q,[z,f(e("input",{class:"form-input",type:"text",id:"title","onUpdate:modelValue":o[2]||(o[2]=a=>t.title=a),placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,512),[[v,t.title]])]),e("div",G,[J,g(i,{modelValue:t.excerpt,"onUpdate:modelValue":o[3]||(o[3]=a=>t.excerpt=a),id:"excerpt",ref:"excerptInput"},null,8,["modelValue"])]),e("div",K,[O,g(i,{modelValue:t.description,"onUpdate:modelValue":o[4]||(o[4]=a=>t.description=a),id:"description",ref:"descriptionInput"},null,8,["modelValue"])]),e("button",{class:"btn btn-default btn-settings",onClick:o[5]||(o[5]=L((...a)=>t.submit&&t.submit(...a),["prevent"]))},"\u0421\u043E\u0437\u0434\u0430\u0442\u044C")])}const Z=U(P,[["render",W]]),$={name:"tournament.edit",components:{AppStageCreate:Z,AppLoader:B,AppEditor:I,AppHeader:F},setup(){const h=M(),o=E(),m=n(),t=n(),d=n(),r=n(),l=n(!1),i=n(),a=h.params.id,_=s=>{i.value.unshift({id:s.id,title:s.title})};return N(async()=>{try{const s=await A.get(`/api/admin/tournament/${a}`);t.value=m.value=s.data.title,d.value=s.data.yacht,r.value=s.data.description?s.data.description:" ";const y=await A.get(`/api/admin/stage/${a}`);i.value=y.data}catch(s){console.log(s.message)}}),{submit:async()=>{l.value=!0;try{await A.patch(`/api/admin/tournament/${a}/update`,{title:t.value,yacht:d.value,description:r.value}),o.dispatch("notification/displayMessage",{value:"\u0421\u0435\u0440\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430",type:"primary"})}catch(s){console.log(s.message),o.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0441\u0435\u0440\u0438\u0438",type:"error"})}l.value=!1},title:t,yacht:d,description:r,loading:l,stages:i,addStage:_,h1:m,time:T}}},tt={class:"container-fluid g-0"},et={class:"row"},ot={class:"col-12"},st={class:"dashboard-item"},at={class:"form-control"},nt=e("label",{for:"title"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0435\u0440\u0438\u0438",-1),it={class:"form-control"},lt=e("label",{for:"yacht"},"\u0422\u0438\u043F \u043B\u043E\u0434\u043A\u0438",-1),rt={class:"form-control"},dt=e("label",{for:"description"},"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1),ct=e("button",{class:"btn btn-default btn-settings"},"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",-1),pt={class:"col-12"},ut={class:"dashboard-item"},mt={class:"stage-title"},_t={class:"stage-yacht"},ft=e("div",{class:"btn btn-default btn-full-width"},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",-1);function vt(h,o,m,t,d,r){const l=p("AppHeader"),i=p("AppLoader"),a=p("AppEditor"),_=p("AppStageCreate"),c=p("router-link");return u(),b(S,null,[g(l,null,{default:C(()=>[D(x(t.h1),1)]),_:1}),e("main",null,[e("div",tt,[e("div",et,[e("div",ot,[e("div",st,[t.loading?(u(),V(i,{key:0})):k("",!0),e("form",{onSubmit:o[3]||(o[3]=L((...s)=>t.submit&&t.submit(...s),["prevent"]))},[e("div",at,[nt,f(e("input",{class:"form-input",type:"text",id:"title","onUpdate:modelValue":o[0]||(o[0]=s=>t.title=s),placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0435\u0440\u0438\u0438"},null,512),[[v,t.title]])]),e("div",it,[lt,f(e("input",{class:"form-input",type:"text",id:"yacht","onUpdate:modelValue":o[1]||(o[1]=s=>t.yacht=s),placeholder:"\u0422\u0438\u043F \u043B\u043E\u0434\u043A\u0438"},null,512),[[v,t.yacht]])]),e("div",rt,[dt,t.description?(u(),V(a,{key:0,modelValue:t.description,"onUpdate:modelValue":o[2]||(o[2]=s=>t.description=s),id:"description"},null,8,["modelValue"])):k("",!0)]),ct],32)])]),e("div",pt,[e("div",ut,[g(_,{onCreate:t.addStage},null,8,["onCreate"])])]),(u(!0),b(S,null,H(t.stages,s=>(u(),b("div",{class:"col-lg-3 col-md-6",key:s.id},[g(c,{class:"stage-item",to:{name:"stage.edit",params:{id:s.id}}},{default:C(()=>[e("div",mt,x(s.title),1),e("div",_t,x(t.yacht),1),ft]),_:2},1032,["to"])]))),128))])])])],64)}const Vt=U($,[["render",vt]]);export{Vt as default};
